(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["pages/index/index"],{"0567":function(e,n,t){"use strict";var r=t("c2e8"),o=t.n(r);o.a},"585d":function(e,n,t){"use strict";(function(e){var n=t("47a9");t("641b");n(t("3240"));var r=n(t("b76c"));my.__webpack_require_UNI_MP_PLUGIN__=t,e(r.default)}).call(this,t("6861")["createPage"])},b76c:function(e,n,t){"use strict";t.r(n);var r=t("cb45"),o=t("bbb0");for(var u in o)["default"].indexOf(u)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(u);t("0567");var i=t("828b"),a=Object(i["a"])(o["default"],r["b"],r["c"],!1,null,"52d995fa",null,!1,r["a"],void 0);n["default"]=a.exports},bbb0:function(e,n,t){"use strict";t.r(n);var r=t("fd84"),o=t.n(r);for(var u in r)["default"].indexOf(u)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(u);n["default"]=o.a},c2e8:function(e,n,t){},cb45:function(e,n,t){"use strict";t.d(n,"b",(function(){return r})),t.d(n,"c",(function(){return o})),t.d(n,"a",(function(){}));var r=function(){var e=this.$createElement;this._self._c},o=[]},fd84:function(e,n,t){"use strict";(function(e){var r=t("47a9"),o=t("3b2d");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u=r(t("7eb4")),i=r(t("ee10")),a=function(e,n){if(!n&&e&&e.__esModule)return e;if(null===e||"object"!==o(e)&&"function"!==typeof e)return{default:e};var t=f(n);if(t&&t.has(e))return t.get(e);var r={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if("default"!==i&&Object.prototype.hasOwnProperty.call(e,i)){var a=u?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}r.default=e,t&&t.set(e,r);return r}(t("8b73")),c=t("226c");t("1b92");function f(e){if("function"!==typeof WeakMap)return null;var n=new WeakMap,t=new WeakMap;return(f=function(e){return e?t:n})(e)}var s={data:function(){return{num:0,userInfo:null}},onLoad:function(n){var t=e.getStorageSync("userInfo");t&&this.isValidUserInfo(t)?(this.userInfo=t,console.log("使用缓存中的 userInfo:",t)):this.getDingTalkUserInfo()},onUnload:function(){},methods:{topage1:function(){return(0,i.default)(u.default.mark((function n(){return u.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.navigateTo({url:"/pages/confirm/index"});case 1:case"end":return n.stop()}}),n)})))()},topage2:function(){e.navigateTo({url:"/pages/inquiry/index"})},isValidUserInfo:function(e){return e&&e.userId&&e.name},getDingTalkUserInfo:function(){var n=this;a.ready((function(){a.runtime.permission.requestAuthCode({corpId:"ding802dd01e436de1eca39a90f97fcb1e09",onSuccess:function(e){var t=e.code;console.log("免登授权码:",JSON.stringify(e)),n.queryLoginInfo(t)},onFail:function(n){e.showToast({title:"获取个人信息异常，请稍后重试",icon:"none"})}})}))},queryLoginInfo:function(n){var t=this;return(0,i.default)(u.default.mark((function r(){return u.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,(0,c.getUserInfo)({code:n}).then((function(n){if(console.log(JSON.stringify(n)),0===n.mescode){var r=n.mesdata;e.setStorageSync("userInfo",r),t.userInfo=r,console.log("用户信息获取成功:",r)}else console.error("获取用户信息失败:",n.errmsg),e.showToast({title:"获取用户信息失败!",icon:"none"})})).catch((function(n){console.error("请求失败:",n),e.showToast({title:"网络请求失败",icon:"none"})}));case 2:case"end":return r.stop()}}),r)})))()}}};n.default=s}).call(this,t("6861")["default"])}},[["585d","common/runtime","common/vendor"]]]);